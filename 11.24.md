万事开头难，尤其是这种前后端分离+AI的项目。很多团队死在第一周，是因为**环境配不好**或者**一上来就写复杂功能**，导致挫败感太强。

为了让你和队长能顺利启动，我把前两周定义为**“Hello World 跑通周”**。

**目标：** 两周后，你们能拿出一个丑一点、但能运行的 Demo：**打开网页 -> 摄像头识别深蹲 -> 计数 -> 数据存入数据库。**

以下是具体到每一天的执行方案：

---

### 第一周：搭架子，通血脉
**核心目标：** 环境配好，前后端能“说话”（API 调通）。

#### Day 1-2：环境配置与仓库初始化 (全员)
这是最枯燥但最重要的一步。
*   **工具安装：**
    *   **前端：** Node.js (v18+), VS Code, Vue Devtools 插件。
    *   **后端：** Python (3.9+), Django, Django REST Framework, Postman (测试接口用)。
    *   **版本控制：** Git。
*   **任务分配：**
    *   **队长：** 在 GitHub/Gitee 建仓库，分好 `frontend` 和 `backend` 两个文件夹。写好 `.gitignore`。
    *   **你：** 确保自己电脑上能把仓库拉下来，并且能运行 `npm install` 和 `pip install` 不报错。
    *   **队友 (A/B/C)：** 跟着你们配环境，配不好的请吃饭求助。

#### Day 3-4：后端起步 (Django)
*   **队长任务：**
    *   创建 Django 项目。
    *   配置好跨域 (CORS)，这非常重要，否则前端连不上后端。
*   **你的任务 (适合练手)：**
    *   **设计数据库 (Models)：** 别想太复杂，先写一个 `TrainingLog` (训练记录) 表。
    *   字段：`user_name` (名字), `action` (动作名), `count` (个数), `date` (时间)。
    *   **写第一个 API：** 写一个简单的 GET 接口，返回 `{"message": "Hello from Django"}`。

#### Day 5-7：前端起步与联调 (Vue3)
*   **队长任务：**
    *   用 Vite 创建 Vue3 + TypeScript 项目。
    *   配置 Axios (用于发请求)。
*   **你的任务 (UI 布局)：**
    *   写一个简单的页面：有一个标题“AI 健身”，有一个按钮“测试连接”。
    *   **关键动作：** 点击按钮，用 Axios 请求后端的 API。如果屏幕上弹窗显示 "Hello from Django"，**第一周任务圆满完成！**
    *   *注：这一步跑通，说明你们的“血管”通了。*

---

### 第二周：装眼睛，做核心
**核心目标：** 搞定 MediaPipe，实现最基础的深蹲计数。

#### Day 8-10：接入 MediaPipe (前端攻坚)
这三天是技术难点，建议你和队长坐在一起开发（结对编程）。
*   **队长任务 (核心)：**
    *   引入 `@mediapipe/pose` 库。
    *   写代码调用摄像头 (`navigator.mediaDevices.getUserMedia`)。
    *   把视频流喂给 MediaPipe，让它在 Canvas 上画出红色的骨骼线。
*   **你的任务 (辅助)：**
    *   处理 UI 细节：比如加个“加载中”的转圈圈（因为模型加载很慢）。
    *   处理权限：如果用户拒绝摄像头权限，给个提示“请允许使用摄像头”。

#### Day 11-12：写算法逻辑 (让它能数数)
*   **队长任务：**
    *   写几何计算函数：算出 髋-膝-踝 的角度。
    *   写状态机：
        *   角度 < 90度 -> 状态 = `DOWN`
        *   角度 > 160度 且 上次是 `DOWN` -> 计数 `count++`。
*   **你的任务：**
    *   在界面上找个角落，用大号字体显示 `count` 变量。
    *   测试：你自己对着摄像头做深蹲，看数字跳不跳。

#### Day 13-14：数据闭环 (存进去)
*   **你的任务 (高光时刻)：**
    *   当用户点击“结束训练”按钮时，把你前端统计到的 `count`，打包成 JSON。
    *   发送 POST 请求给后端。
    *   去 Django 后台看一眼，数据库里是不是多了一条记录？
*   **队长任务：**
    *   优化代码结构，把乱七八糟的代码封装成 Vue Hook (`usePose.ts`)，方便以后复用。

---

### 给你的“避坑”小贴士 (一定要看！)

1.  **别急着上数据库软件：**
    第一周先用 Django 自带的 `db.sqlite3` (文件型数据库)，**千万别**一上来就去折腾 PostgreSQL 或 MySQL 的安装，那个很容易报错，会浪费你们两天时间。等功能跑通了，第三周再换数据库。

2.  **别管 UI 丑不丑：**
    按钮就用原生的，背景就用白色的。**不要**花时间去调 CSS 颜色、圆角、阴影。那些是队友 A (前端工具人) 后面要做的事。现在的重点是功能！

3.  **善用 AI 编程助手：**
    *   遇到报错，直接把报错信息复制给 ChatGPT/Cursor。
    *   写 API 时，直接对 AI 说：“帮我用 Django DRF 写一个保存训练记录的 API，字段有...”，它生成的代码基本能用。

### 怎么开始？
明天一早，你和队长说：
> “咱们这周别想太远，目标就是**‘通’**。周三前把环境配好，周日能让前端网页从后端拿数据。我来负责写数据库模型和简单的界面，你专心搞定项目搭建和跨域配置。”

这样，你们的项目就稳稳地启动了！





明白了！你的队友是从**“角色权限”**（Actors / Roles）的角度来考虑的。

在标准的软件开发中（尤其是 Django 体系），设计**“用户模型”**确实是第一步。针对你们这个**AI 健身 + 社交竞技**的项目，至少需要设计这两个核心对象：**普通用户（学员）** 和 **管理员（教练/系统）**。

这是具体的属性设计思路，你可以直接发给队友参考：

------



### 1. 普通用户对象 (General User)



这是系统的核心使用者。他的属性设计必须服务于两个目的：**让 AI 算得准（生理数据）** 和 **让社交更好玩（游戏数据）**。



#### **A. 基础身份属性 (Identity)**



- `username` (用户名): 唯一标识。
- `avatar` (头像 URL): 社交 PK 时显示给对手看。
- `phone` / `email`: 用于找回密码或接收训练周报。



#### **B. AI 生理画像属性 (Physical Profile)**



*这些数据主要传给 LLM (大模型) 生成计划，以及 CV (视觉) 计算卡路里。*

- `gender` (性别): 决定基础代谢率公式。
- `birth_date` (出生日期): 算出年龄，评估心率区间。
- `height` (cm): 视觉校准的基础参照。
- `weight` (kg): 结合动作次数计算消耗了多少卡路里。
- `injury_history` (伤病标签): **关键字段！** (例如：`["膝盖受损", "腰椎不适"]`)。
  - *作用：LLM 生成计划时，会根据这个标签自动剔除危险动作（如深蹲、硬拉）。*



#### **C. 游戏化成长属性 (Gamification)**



- `level` (等级): Lv.1 ~ Lv.99，根据训练时长升级。
- `exp` (经验值): 每次动作标准度高，经验值加倍。
- `streak_days` (连续打卡天数): 用于激励用户。

------



### 2. 管理员对象 (Administrator)



这是后台的操作者。在 Django 中，通常使用 `is_staff=True` 来区分，但你们可以扩展一些特殊属性。



#### **A. 权限属性**



- `role_type` (角色类型): 超级管理员 / 内容运营 / 动作审核员。
- `access_level`: 决定能不能看到用户的敏感数据（如体重）。



#### **B. 业务管理属性**



- **动作库管理权**: 管理员负责定义“深蹲”的标准。
  - 例如：管理员在后台设置 *“深蹲的标准是髋膝角度 < 100度”*，前端的 AI 就会立刻应用这个新标准。
- **全局公告发布**: 向所有 App 端推送比赛通知。
- **封禁权限**: 遇到 PK 房里说脏话的用户，进行禁言或封号。

------



### 💡 (进阶) 如果想要加分，可以加第 3 个对象：





### 3. AI 虚拟教练 (Virtual Coach Agent)



虽然它不是真人，但在数据库里可以把它当做一个“特殊对象”来存。

- **属性**:
  - `personality` (性格): 毒舌型 / 温柔型 / 严厉型（决定 TTS 语音合成的语调）。
  - `voice_id` (音色 ID): 对应 Azure 或 浏览器的某种声音接口。
  - *场景：用户可以在设置里选：“我想要一个严厉的教练”，系统就会加载对应的 Prompt 和语音包。*

------



### 👨‍💻 技术实现建议 (Django)



告诉你的队友，在 Django 里不需要建两张表，**一张表就够了**。

推荐做法是继承 `AbstractUser`，然后加一个字段区分：

Python

```
# 伪代码思路
class User(AbstractUser):
    # 角色定义
    ROLE_CHOICES = (
        ('student', '普通学员'),
        ('admin', '管理员'),
        ('coach', '认证教练'),
    )
    role = models.CharField(choices=ROLE_CHOICES, default='student')
    
    # 生理数据 (只有 role='student' 时才填)
    height = models.FloatField(null=True)
    weight = models.FloatField(null=True)
    injury_history = models.TextField(default="无")
    
    # 游戏数据
    level = models.IntegerField(default=1)
```

**这样回答，既满足了“至少两个对象”的要求，又符合 Django 的开发规范。** 怎么样，这个思路可以吗？





你的队友非常有经验！👍 **这正是标准的“自顶向下”开发模式**。

先搭好房子的“骨架”（页面跳转、导航菜单），再往房间里填“家具”（具体的 AI 功能）。这样大家对整个 APP 长什么样会非常有概念，分工也更明确。

既然要做整体框架，我们需要把之前的“单页面 Demo”改造成一个**多页面应用 (SPA)**。

我们现在的目标是实现这样的**App 导航流**：

1. **首页 (Home)**：展示用户数据，有一个硕大的“开始训练”按钮。
2. **训练页 (Training)**：点击开始后跳转到这里，**这里才是放摄像头和 AI 的地方**。
3. **我的 (Profile)**：查看历史记录、设置等。



你的队友说得**非常对**。在写代码之前，先想清楚“我们到底要在数据库里存什么东西”，也就是**数据建模**，是软件工程里最重要的一步。如果现在不想好，后面改数据库会非常痛苦。

根据你们项目的核心功能（AI 视觉、LLM 生成计划、社交 PK），我把系统拆解为 **4 大核心对象（实体）**。

你可以把这份**“对象设计草图”**发给队友讨论：

------



### 1. 用户身体档案 (User Profile) —— 给 LLM 看的“病历本”



这个对象不仅仅是存账号密码，它的核心作用是**作为 Prompt 发送给大模型**，让 AI 知道你是谁，从而生成定制计划。

- **基础属性**：
  - **昵称 & 头像**：社交 PK 时展示用。
  - **性别 & 年龄**：计算基础代谢率（BMR）和心率区间的核心依据。
- **核心身体数据**（随时间变化）：
  - **身高 (cm) & 体重 (kg)**：计算 BMI。
  - **体脂率 (%)**：可选，比 BMI 更准的指标。
  - **运动基础**：小白 / 进阶 / 运动员（决定 AI 生成计划的难度系数）。
  - **伤病史/禁忌**：比如“左膝盖痛”、“腰椎间盘突出”（**非常关键**，Prompt 里要告诉 AI 避开相关动作）。
- **五维能力值**（那张雷达图）：
  - 上肢力量、下肢力量、核心、心肺、柔韧性（0-100分，每次训练后更新）。

------



### 2. 动作词典 (Exercise Library) —— 标准化的“教科书”



这是你们系统的“知识库”，定义了 AI 能识别哪些动作。

- **基础属性**：
  - **动作名称**：深蹲 (Squat)、开合跳 (Jumping Jack)、俯卧撑 (Push-up)。
  - **类型**：力量 / 有氧 / 拉伸。
  - **单位热量消耗**：每分钟或每做一次消耗多少千卡（用于计算总消耗）。
- **AI 视觉参数**（技术核心）：
  - **关键关节**：比如深蹲关注“膝盖、髋部”，俯卧撑关注“手肘、肩膀”。
  - **标准角度阈值**：比如深蹲要求“大腿与地面平行（髋膝连线角度 < 180度）”。
  - **纠错提示语**：比如“膝盖内扣”、“背部未挺直”（用于前端 TTS 语音播报）。

------



### 3. 每日训练计划 (Training Plan) —— LLM 生成的“处方单”



这是连接用户和 AI 的桥梁。

- **属性**：
  - **日期**：2025-11-24。
  - **状态**：未开始 / 进行中 / 已完成。
  - **AI 评语**：大模型生成的鼓励话术或饮食建议（比如“今天练腿，建议补充 20g 蛋白质”）。
  - **计划内容 (JSON)**：这里存的是一个列表，比如：
    - `[{动作: "深蹲", 目标: 20个}, {动作: "开合跳", 目标: 30秒}]`
    - *注：这个列表是 LLM 算出来的，每天都不一样。*

------



### 4. 训练实录 (Training Log) —— 真实的“成绩单”



这是用户拿着手机对着摄像头练完之后，产生的真实数据。

- **属性**：
  - **关联动作**：做了哪个动作？
  - **完成数量**：AI 视觉数了几个？（比如实际做了 15 个）。
  - **准确度评分 (0-100)**：这是你们项目的**亮点**。
    - 如果用户深蹲到底了，给 95 分。
    - 如果只蹲了一半（半程），给 60 分。
    - *这个分数决定了雷达图的“能力值”涨不涨。*
  - **耗时**：用了多少秒。
  - **消耗卡路里**：根据体重和数量算出来的数值。
  - **最大连击 (Combo)**：连续做对多少个标准动作（游戏化体验）。

------



### 💡 举个场景串联一下（给队友解释用）：



1. **用户对象**：小明（体重 80kg，膝盖受过伤）。
2. **LLM (大脑)**：读取小明的数据，生成**训练计划对象** —— “因为膝盖有伤，今天不推荐跳跃，建议做 3 组靠墙静蹲”。
3. **前端 (眼睛)**：加载**动作词典**里的“靠墙静蹲”标准（检测膝盖角度是否 90 度）。
4. **用户**：开始训练，前端实时纠错。
5. **数据库**：存入一条**训练实录** —— “小明做了 60 秒靠墙静蹲，动作标准度 98 分，消耗 15 千卡”。
6. **系统**：更新小明的**身体档案** —— “下肢耐力”属性 +1 分。

你可以问问队友：“这 4 个对象是否涵盖了我们的核心流程？还有没有补充的？”